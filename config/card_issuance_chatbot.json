{
  "welcome": {
    "name": "welcome",
    "description": "고객을 환영하고 카드 발급 서비스를 소개",
    "ko_name": "환영",
    "visible": true,
    "responses": {
      "default": "안녕하세요! 카드 발급 서비스에 오신 것을 환영합니다.",
      "returning_user": "다시 찾아주셔서 감사합니다. 카드 발급을 도와드리겠습니다."
    },
    "actions": ["log_session_start", "init_card_application"],
    "params": {
      "bank_name": "마고은행",
      "service_hours": "평일 10:00-18:00"
    },
    "conditions": {},
    "next_nodes": ["collect_personal_info"]
  },
  
  "collect_personal_info": {
    "name": "collect_personal_info", 
    "description": "신용카드 발급을 위한 개인정보 수집",
    "ko_name": "개인정보수집",
    "visible": true,
    "responses": {
      "initial": "카드 발급을 위해 개인정보가 필요합니다. {missing_info}를 알려주세요.",
      "progress": "좋습니다. {collected_count}개 정보 중 {total_count}개를 수집했습니다.",
      "confirmation": "입력해주신 정보를 확인해드리겠습니다.\n이름: {name}\n생년월일: {birth_date}"
    },
    "actions": ["validate_personal_info", "check_existing_customer"],
    "params": {
      "required_slots": ["name", "birth_date"],
      "validation_rules": {
        "name": "^[가-힣]{2,10}$",
        "birth_date": "^\\d{6}$"
      },
      "max_retries": 3
    },
    "conditions": {},
    "next_nodes": ["select_card_type"]
  },

  "select_card_type": {
    "name": "select_card_type",
    "description": "발급받을 카드 종류 선택",
    "ko_name": "카드종류선택", 
    "visible": true,
    "responses": {
      "default": "어떤 카드를 발급받으시겠어요? 1) 일반카드 2) 골드카드 3) 플래티넘카드",
      "benefits_info": "{card_type}의 주요 혜택: {benefits}",
      "selection_confirmed": "{card_type}을 선택하셨습니다. 연회비는 {annual_fee}원입니다."
    },
    "actions": ["show_card_benefits", "calculate_annual_fee"],
    "params": {
      "required_slots": ["card_type"],
      "card_options": {
        "일반카드": {
          "annual_fee": 0,
          "benefits": "국내 가맹점 0.3% 적립, 해외결제 수수료 면제"
        },
        "골드카드": {
          "annual_fee": 50000,
          "benefits": "국내 0.5% 적립, 해외 1% 적립, 공항라운지 이용"
        },
        "플래티넘카드": {
          "annual_fee": 200000,
          "benefits": "국내외 1% 적립, 프리미엄 혜택, 컨시어지 서비스"
        }
      }
    },
    "conditions": {},
    "next_nodes": ["income_verification"]
  },

  "income_verification": {
    "name": "income_verification",
    "description": "소득 정보 확인 및 신용평가",
    "ko_name": "소득확인",
    "visible": true,
    "responses": {
      "default": "카드 발급 심사를 위해 소득 정보가 필요합니다.",
      "income_input": "연 소득을 입력해주세요. (단위: 만원)",
      "workplace_input": "직장명과 근무기간을 알려주세요.",
      "under_review": "입력해주신 정보로 신용평가를 진행하겠습니다."
    },
    "actions": ["credit_check", "income_verification"],
    "params": {
      "required_slots": ["annual_income", "workplace", "employment_period"],
      "min_income": {
        "일반카드": 2000,
        "골드카드": 3500,
        "플래티넘카드": 8000
      },
      "min_employment_months": 6
    },
    "conditions": {},
    "next_nodes": ["address_collection"]
  },

  "address_collection": {
    "name": "address_collection",
    "description": "카드 배송을 위한 주소 정보 수집",
    "ko_name": "주소수집",
    "visible": true,
    "responses": {
      "default": "카드를 받으실 주소를 알려주세요.",
      "address_input": "우편번호와 상세주소를 입력해주세요.",
      "delivery_options": "배송 옵션: 1) 일반배송(무료, 3-5일) 2) 빠른배송(3000원, 1-2일)",
      "address_confirmed": "배송 주소가 확인되었습니다: {full_address}"
    },
    "actions": ["validate_address", "calculate_delivery_fee"],
    "params": {
      "required_slots": ["postal_code", "address", "detailed_address", "delivery_option"],
      "delivery_fees": {
        "일반배송": 0,
        "빠른배송": 3000
      }
    },
    "conditions": {},
    "next_nodes": ["final_confirmation"]
  },

  "final_confirmation": {
    "name": "final_confirmation",
    "description": "최종 정보 확인 및 발급 승인",
    "ko_name": "최종확인",
    "visible": true,
    "responses": {
      "default": "입력해주신 모든 정보를 확인해주세요.",
      "summary": "신청 요약:\n- 카드: {card_type}\n- 연회비: {annual_fee}원\n- 배송주소: {full_address}\n- 배송비: {delivery_fee}원",
      "terms_agreement": "개인정보 처리방침과 카드 이용약관에 동의하시나요?",
      "final_confirm": "모든 정보가 정확한가요? 발급을 진행하시겠어요?"
    },
    "actions": ["generate_application_summary", "check_terms_agreement"],
    "params": {
      "required_slots": ["terms_agreed", "final_confirmation"],
      "terms_url": "https://example.com/terms",
      "privacy_url": "https://example.com/privacy"
    },
    "conditions": {
      "proceed_to_processing": {
        "field": "slots.final_confirmation",
        "operator": "equals", 
        "value": "yes"
      },
      "cancel_application": {
        "field": "slots.final_confirmation",
        "operator": "equals",
        "value": "no"
      }
    },
    "next_nodes": ["process_application"]
  },

  "process_application": {
    "name": "process_application",
    "description": "카드 발급 신청 처리 및 심사",
    "ko_name": "신청처리",
    "visible": true,
    "responses": {
      "default": "카드 발급 신청을 처리하고 있습니다...",
      "processing": "신용평가 및 서류 검토 중입니다. 잠시만 기다려주세요.",
      "approval": "축하합니다! 카드 발급이 승인되었습니다.",
      "rejection": "죄송합니다. 현재 조건으로는 카드 발급이 어렵습니다.",
      "pending": "추가 서류 검토가 필요합니다. 영업일 기준 1-2일 후 연락드리겠습니다."
    },
    "actions": ["process_credit_application", "generate_application_number"],
    "params": {
      "processing_time_seconds": 3,
      "approval_criteria": {
        "min_credit_score": 650,
        "debt_to_income_ratio": 0.4
      }
    },
    "conditions": {
      "application_approved": {
        "field": "context.approval_result",
        "operator": "equals",
        "value": "approved"
      },
      "application_rejected": {
        "field": "context.approval_result", 
        "operator": "equals",
        "value": "rejected"
      }
    },
    "next_nodes": [
      {
        "name": "completion_approved",
        "context": "application_approved"
      },
      {
        "name": "completion_rejected",
        "context": "application_rejected"
      }
    ]
  },

  "completion_approved": {
    "name": "completion_approved",
    "description": "카드 발급 승인 완료 안내",
    "ko_name": "승인완료",
    "visible": true,
    "responses": {
      "default": "카드 발급이 완료되었습니다!",
      "success_details": "신청번호: {application_number}\n카드: {card_type}\n배송예정일: {delivery_date}\n고객센터: 1588-1234",
      "next_steps": "카드 수령 후 홈페이지 또는 앱에서 활성화해주세요.",
      "farewell": "이용해주셔서 감사합니다. 궁금한 점이 있으시면 언제든 연락주세요!"
    },
    "actions": ["send_confirmation_sms", "schedule_delivery", "log_completion"],
    "params": {
      "delivery_days": 3,
      "customer_service": "1588-1234"
    },
    "conditions": {},
    "next_nodes": []
  },

  "completion_rejected": {
    "name": "completion_rejected", 
    "description": "카드 발급 거절 안내 및 대안 제시",
    "ko_name": "거절안내",
    "visible": true,
    "responses": {
      "default": "카드 발급 심사 결과를 안내드립니다.",
      "rejection_reason": "현재 {rejection_reason}으로 인해 발급이 어려운 상황입니다.",
      "alternative_options": "대안으로 다음을 고려해보세요:\n1) 6개월 후 재신청\n2) 소득 증빙 보완 후 재신청\n3) 체크카드 발급",
      "support_info": "자세한 상담을 원하시면 고객센터 1588-1234로 연락주세요."
    },
    "actions": ["log_rejection", "send_rejection_notice"],
    "params": {
      "reapplication_period_months": 6,
      "alternative_products": ["체크카드", "선불카드"]
    },
    "conditions": {},
    "next_nodes": []
  }
} 