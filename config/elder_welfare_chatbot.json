{
  "welcome": {
    "name": "welcome",
    "description": "노인 복지 서비스 안내 및 시작 인사",
    "ko_name": "환영",
    "visible": true,
    "responses": {
      "default": "안녕하세요! 노인 복지 서비스를 안내해 드립니다. 몇 가지 정보를 확인하고 적합한 혜택을 연결해 드릴게요."
    },
    "actions": ["log_session_start"],
    "params": {
      "agency_name": "마고복지센터",
      "service_hours": "평일 09:00-18:00"
    },
    "conditions": {},
    "next_nodes": ["collect_basic_info"]
  },

  "collect_basic_info": {
    "name": "collect_basic_info",
    "description": "기본 정보(성함, 연령) 수집",
    "ko_name": "기본정보수집",
    "visible": true,
    "responses": {
      "initial": "먼저 성함과 나이를 알려주세요. 예) 이름: 홍길동, 나이: 72",
      "progress": "좋습니다. 필요한 정보 중 일부를 받았습니다.",
      "confirmation": "입력해주신 정보를 확인하겠습니다.\n이름: {name}\n나이: {age}"
    },
    "actions": ["validate_basic_info"],
    "params": {
      "required_slots": ["name", "age"],
      "validation_rules": {
        "name": "^[가-힣A-Za-z]{2,20}$",
        "age": "^\\d{2,3}$"
      },
      "max_retries": 3
    },
    "conditions": {},
    "next_nodes": ["eligibility_check"]
  },

  "eligibility_check": {
    "name": "eligibility_check",
    "description": "연령 등 기본 자격 요건 확인",
    "ko_name": "자격확인",
    "visible": true,
    "responses": {
      "default": "입력하신 정보로 자격을 확인 중입니다.",
      "eligible": "자격 요건을 충족하셨습니다. 이용 가능한 프로그램을 안내드릴게요.",
      "ineligible": "현재 기본 자격 요건에 부합하지 않으신 것으로 보입니다. 다른 지원 정보를 안내드릴게요."
    },
    "actions": ["check_age_eligibility"],
    "params": {
      "min_age": 65
    },
    "conditions": {},
    "next_nodes": ["program_selection"]
  },

  "program_selection": {
    "name": "program_selection",
    "description": "이용 가능한 복지 프로그램 선택",
    "ko_name": "프로그램선택",
    "visible": true,
    "responses": {
      "default": "이용 가능한 프로그램은 다음과 같습니다. 1) 기초연금 2) 경로당 프로그램 3) 방문요양서비스\n원하시는 프로그램을 선택해 주세요.",
      "benefits_info": "{program_type}의 주요 내용: {details}",
      "selection_confirmed": "{program_type}을(를) 선택하셨습니다. 신청을 진행할게요."
    },
    "actions": ["show_program_details"],
    "params": {
      "required_slots": ["program_type"],
      "program_options": {
        "기초연금": {
          "details": "만 65세 이상 소득 하위 어르신 대상 매월 연금 지급",
          "doc_required": "신분증, 통장 사본"
        },
        "경로당 프로그램": {
          "details": "지역 경로당에서 진행하는 여가·건강 프로그램 참여",
          "doc_required": "신분증"
        },
        "방문요양서비스": {
          "details": "요양보호사가 가정을 방문하여 일상생활 보조 제공",
          "doc_required": "장기요양인정서(해당 시)"
        }
      }
    },
    "conditions": {},
    "next_nodes": ["final_confirmation"]
  },

  "final_confirmation": {
    "name": "final_confirmation",
    "description": "신청 정보 최종 확인 및 동의",
    "ko_name": "최종확인",
    "visible": true,
    "responses": {
      "default": "선택하신 프로그램으로 신청을 진행할까요?",
      "summary": "신청 요약:\n- 성함: {name}\n- 나이: {age}\n- 프로그램: {program_type}",
      "terms_agreement": "개인정보 수집 및 이용에 동의하시나요?",
      "final_confirm": "모든 정보가 정확한가요? 신청을 확정하시겠어요?"
    },
    "actions": ["check_terms_agreement"],
    "params": {
      "required_slots": ["terms_agreed", "final_confirmation"]
    },
    "conditions": {
      "proceed_to_processing": {
        "field": "slots.final_confirmation",
        "operator": "equals",
        "value": "yes"
      },
      "cancel_application": {
        "field": "slots.final_confirmation",
        "operator": "equals",
        "value": "no"
      }
    },
    "next_nodes": ["process_application"]
  },

  "process_application": {
    "name": "process_application",
    "description": "프로그램 신청 처리",
    "ko_name": "신청처리",
    "visible": true,
    "responses": {
      "default": "신청을 처리 중입니다...",
      "processing": "관련 서류 확인 및 자격 검토 중입니다. 잠시만 기다려주세요.",
      "approval": "신청이 승인되었습니다.",
      "rejection": "죄송합니다. 현재 조건으로는 신청 승인이 어렵습니다.",
      "pending": "추가 확인이 필요합니다. 담당자가 연락드리겠습니다."
    },
    "actions": ["register_program"],
    "params": {
      "processing_time_seconds": 2
    },
    "conditions": {
      "application_approved": {
        "field": "context.approval_result",
        "operator": "equals",
        "value": "approved"
      },
      "application_rejected": {
        "field": "context.approval_result",
        "operator": "equals",
        "value": "rejected"
      }
    },
    "next_nodes": [
      { "name": "completion_enrolled", "context": "application_approved" },
      { "name": "completion_unenrolled", "context": "application_rejected" }
    ]
  },

  "completion_enrolled": {
    "name": "completion_enrolled",
    "description": "복지 프로그램 신청 완료 안내",
    "ko_name": "신청완료",
    "visible": true,
    "responses": {
      "default": "신청이 완료되었습니다! 곧 안내 문자를 보내드리겠습니다.",
      "next_steps": "프로그램 안내에 따라 일정에 맞춰 참여해 주세요.",
      "support": "문의는 복지지원센터(02-1234-5678)로 연락 주세요."
    },
    "actions": ["send_confirmation_notice"],
    "params": {},
    "conditions": {},
    "next_nodes": []
  },

  "completion_unenrolled": {
    "name": "completion_unenrolled",
    "description": "신청 반려 안내 및 대안 제시",
    "ko_name": "반려안내",
    "visible": true,
    "responses": {
      "default": "현재 신청 승인이 어렵습니다.",
      "alternative_options": "다음 대안을 고려해 보세요:\n1) 다른 프로그램 문의\n2) 조건 충족 후 재신청",
      "support_info": "상세 상담 원하시면 복지지원센터(02-1234-5678)로 연락 주세요."
    },
    "actions": ["log_rejection"],
    "params": {},
    "conditions": {},
    "next_nodes": []
  }
} 